# Практическая работа 01. 22.01.2024 Классическое определение вероятности

## Задача 1

### Условие задачи

Двое бросают монету двадцать раз каждый.
Найдите вероятность того, что у них выпадет
одинаковое число гербов.

### Решение задачи

$$
P = \frac{n(\text{благ})}{N(\text{всех})}
$$

$$
N = 2^40
$$

$$
n =
\Sigma_{i=0}^{20} C_{20}^i \cdot C_{20}^{n-i} =
C_{40}^{20}
$$

Составляем программу для вычисления благоприятных случаев

```python
import math

i1 = 20
n1 = 40

x1 = math.factorial(n1) / (math.factorial(n1 - i1) * math.factorial(i1))

print(x1)

x2 = 0
n2 = 20

for i2 in range(20+1):
    C1 = math.factorial(n2) / (math.factorial(n2 - i2) * math.factorial(i2))
    C2 = math.factorial(n2) / (math.factorial(i2) * math.factorial(n2 - i2))
    x2 = x2 + C1 * C2

print(x2)
```

Получаем значения

```bash
python script.py
137846528820.0
137846528820.0
```

Уравнение для получения итогового результата:

$$
P = \frac{n(\text{благ})}{N(\text{всех})} = \frac{137846528820}{2^40} = 0.12537068761957926
$$

Составляем программу для получия значения:

```python
n = 137846528820
N = 2 ** 40
print(n / N)
```

Ответ:

```bash
python script.py
0.12537068761957926
```

### Ответ

$$
P = \frac{n(\text{благ})}{N(\text{всех})} = \frac{137846528820}{2^40} = 0.12537068761957926
$$

### Проверка

```python
import random

N = 10 ** 6
n = 0

# 0 - орёл (герб)
# 1 - решка

for i in range(N):
    l1 = []
    l2 = []

    for j in range(20):
        a = random.randint(0,1)
        l1.append(a)
    
    for j in range(20):
        b = random.randint(0,1)
        l2.append(b)
    
    l1_even =  [num for num in l1 if num % 2 == 0] # Только орлы
    l2_even =  [num for num in l2 if num % 2 == 0] # Только орлы
    
    l1_count = len(l1_even)
    l2_count = len(l2_even)

    if l1_count == l2_count:
        n = n + 1


P = n / N # Итоговая вероятность

P_format = '{:.15f}'.format(P) # Для хорошего просмотра

print(f"Всего благоприятных случаев: {n}")
print(f"Итоговая вероятнгость: {P_format}")
```

Итого получаем:

```bash
python script.py
Всего благоприятных случаев: 125709
Итоговая вероятнгость: 0.125708999999999
```

Код на Rust:

```rust
use rand::Rng;

fn main() {
    let mut rng = rand::thread_rng();
    let mut n = 0;

    for _ in 0..(10_usize.pow(6)) {
        let mut l1 = Vec::new();
        let mut l2 = Vec::new();

        for _ in 0..20 {
            let a = rng.gen_range(0..=1);
            l1.push(a);
        }
        
        for _ in 0..20 {
            let b = rng.gen_range(0..=1);
            l2.push(b);
        }

        let l1_even: Vec<_> = l1.iter().filter(|&&x| x % 2 == 0).collect();
        let l2_even: Vec<_> = l2.iter().filter(|&&x| x % 2 == 0).collect();

        let l1_count = l1_even.len();
        let l2_count = l2_even.len();

        if l1_count == l2_count {
            n += 1;
        }
    }

    let p = n as f64 / (10_usize.pow(6)) as f64;

    println!("Всего благоприятных случаев: {}", n);
    println!("Итоговая вероятность: {:.15}", p);
}
```

Настройка `Cargo.toml`

```toml
[dependencies]
rand = "0.8.5"
```

## Задача 2

### Условие задачи

Из чисел $1$, $2$, $3$, $4$, $5$ одно за другим выбирают наугад
два числа (без возвращения). Пусть $x_1$ - первое извлеченное
число, $х_2$ - второе извлеченное число. Найдите вероятность
того, что $$х_1 - х_2 \geq 2$$

### Решение задачи

$$
P = \frac{n}{N}
$$

$$
N = 20
$$

$$
n = 6
$$

$$
P = \frac{6}{20} = 0,3
$$

### Ответ

$$
P = \frac{n}{N} = \frac{6}{20} = 0,3
$$

### Проверка

```python
import random

N = 10 ** 6
n = 0

for i in range(N):
    l1 = []
    l2 = []
    for j in range(1, 6):
        l1.append(j)
    a = random.randint(1,5)
    for j in range(5):
        if j != a:
            l2.append(j)
    b = random.randint(1, 4)
    if a - b >= 2:
        n = n + 1
print('Оценка p равна: ' , n/N)
```

Вывод консоли:

```bash
[nix-shell:~]$ python ./python.py
Оценка p равна:  0.299949
```

## Задача 3

### Условие задачи

Рассматриваются шестизначные лотерейные билеты,
занумерованные $000000,\dots,999999$. Случайным образом
выбирается один билет. Найдите вероятность того, что сумма
всех цифр выбранного билета равна $21$.

### Решение задачи

$$
P = \frac{n}{N}
$$

$$
N = 10^6
$$

Составим скрипт для получения Благоприятных случаев:
```python
N = 10 ** 6
n = 0

for i in range(N):
    s = 0
    for a in str(i):
        s = s + int(a)
    if s == 21:
        n = n + 1
print('Благоприятных случаев', n)
print('Итоговая вероятность ', n / N)
```

Итого получаем:
```bash
Благоприятных случаев 39662
Итоговая вероятность  0.039662
```

$$
P = \frac{n}{N} = \frac{39662}{10^6} = 0.039662
$$

### Ответ

$$
P = \frac{n}{N} = \frac{39662}{10^6} = 0.039662
$$

### Проверка

Методом Монте-Карло составим программу:
```python
import random

N = 10 ** 6
n = 0

for i in range(N):
    s = 0
    for a in str(random.randint(0, 999999)):
        s = s + int(a)
    if s == 21:
        n = n + 1

print('Благоприятных случаев', n)
print('Итоговая вероятность ', n / N)
```

Итого:
```bash
python script.py
Благоприятных случаев 39827
Итоговая вероятность  0.039827
```


## Задача 4

### Условие задачи

Вероятность какого события больше: получить по крайней мере
две шестерки при подбрасывании $12$ костей, или получить
по крайней мере три шестерки при подбрасывании $18$ костей?

### Решение задачи

#### Начало

$$
P_1 = 1 - P(выпадет 1 шестёрка из 12) -  P(выпадет 2 шестёрки из 12)
$$

$$
P_2 = 1 
- P(выпадет 1 шестёрка из 18)
- P(выпадет 2 шестёрки из 18)
- P(выпадет 3 шестёрки из 18)
$$

Используя библиотеку, python и бином ньютона находим вероятности выпадения и сравниваем их:
```python
from scipy.stats import binom

# Вероятность получить по крайней мере две шестерки при подбрасывании 12 костей
p1 = 1 - binom.pmf(11, 12, 5/6) -  binom.pmf(12, 12, 5/6)
print(f"Первый сценарий: {p1}")

# Вероятность получить по крайней мере три шестерки при подбрасывании 18 костей
p2 = 1 - binom.pmf(16, 18, 5/6) - binom.pmf(17, 18, 5/6) - binom.pmf(18, 18, 5/6)
print(f"Второй сценарий: {p2}")

# Сравнение вероятностей
if p1 > p2:
    print("Первый сценарий более вероятен.")
elif p2 > p1:
    print("Второй сценарий более вероятен.")
else:
    print("Оба сценария имеют одинаковую вероятность.")
```

### Ответ

Вероятность получить две шестерки при подбрасывании
$12$ костей больше, чем вероятность получить три
шестерки при подбрасывании $18$ костей.

### Проверка

```python
import random

N = 10**6
n1 = 0
n2 = 0

for i in range(N):
    l1 = []
    l2 = []

    for j in range(12):
        a = random.randint(1,6)
        l1.append(a)
    
    for j in range(18):
        b = random.randint(1,6)
        l2.append(b)
    
    l1_six =  [num for num in l1 if num == 6]
    l2_six =  [num for num in l2 if num == 6]

    l1_count = len(l1_six)
    l2_count = len(l2_six)

    if l1_count >= 2:
        n1 = n1 + 1
    
    if l2_count >= 3:
        n2 = n2 + 1

p1 = n1 / N
p2 = n2 / N

print("Общее количество бросков: ", N)
print("Благоприятных для n1: ", n1)
print("Благоприятных для n2: ", n2)
print("Вероятность для p1: ", p1)
print("Вероятность для p2: ", p2)

if p1 > p2:
    print("P1 более вероятен.")
elif p2 > p1:
    print("P2 более вероятен.")
else:
    print("Оба сценария имеют одинаковую вероятность.")
```

Итого:

```bash
python script.py
Общее количество бросков:  1000000
Благоприятных для n1:  617714
Благоприятных для n2:  596831
Вероятность для p1:  0.617714
Вероятность для p2:  0.596831
P1 более вероятен.
```


## Задача 5

### Условие задачи

Найдите вероятность того, что при последовательном
бросании кости серия из трех «единиц» появится раньше
серии из четырнадцати «не единиц».

### Решение задачи

Ваш вопрос связан с теорией игр и концепцией математического ожидания. Математическое ожидание — это среднее значение случайной величины в долгосрочной перспективе, когда эксперимент повторяется многократно. В контексте броска кости, математическое ожидание можно вычислить как сумму произведений каждого возможного исхода на его вероятность.

При последовательном бросании кости, мы хотим найти вероятность того, что серия из трех "единиц" появится раньше серии из четырнадцати "не единиц". Для этого нам нужно сравнить математические ожидания этих двух событий.

Математическое ожидание для серии из трех "единиц" будет равно 3, поскольку вероятность получить "единицу" на каждом броске составляет 1/6.

С другой стороны, математическое ожидание для серии из четырнадцати "не единиц" будет равно 14, поскольку вероятность получить не "единицу" на каждом броске составляет 5/6.

Теперь, чтобы найти вероятность того, что серия из трех "единиц" появится раньше серии из четырнадцати "не единиц", мы можем использовать формулу математического ожидания:

P(серия из трех "единиц" раньше серии из четырнадцати "не единиц") = E(серия из трех "единиц") / (E(серия из трех "единиц") + E(серия из четырнадцати "не единиц"))

Подставив полученные значения, получим:

P(серия из трех "единиц" раньше серии из четырнадцати "не единиц") = 3 / (3 + 14) = 0.514

Итак, вероятность того, что серия из трех "единиц" появится раньше серии из четырнадцати "не единиц" при последовательном бросании кости, составляет приблизительно 0.514 или 51.4% 3.

```python
prob_three_ones = (1/6) ** 3
prob_fourteen_non_ones = (5/6) ** 14

result = prob_three_ones / prob_fourteen_non_ones
print(result)
```


### Ответ

Поймите нас, мы ничего не поняли, о чем вы говорили на паре, вы использовали какие-то формулы и свойства, которые мы не знаем. Мы не понимаем этой задачи. Просим понять и простить.

P(серия из трех "единиц" раньше серии из четырнадцати "не единиц") = 3 / (3 + 14) = 0.514

### Проверка

```python
prob_three_ones = (1/6) ** 3
prob_fourteen_non_ones = (5/6) ** 14

result = prob_three_ones / prob_fourteen_non_ones
print(result)
```
