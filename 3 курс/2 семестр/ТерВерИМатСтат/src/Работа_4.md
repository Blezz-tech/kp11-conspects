# Занятие 03. 05.02.2024 . Условная вероятность. Получение непрерывного бета-распределения

## Концепт-карты

### Концепт-карта Глава 7

![Рисунок 1. Концепт-карта Глава 7](./Картинки/Главы/7.png)

### Концепт-карта Глава 8

![Рисунок 2. Концепт-карта Глава 8](./Картинки/Главы/8.png)

## Задача 1

### Условие задачи

Канзас-Сити, вопреки названию, стоит на границе двух штатов, Миссури и
Канзаса. Агломерация Канзас-Сити состоит из $15$ округов: $9$ в штате
Миссури и $6$ в Канзасе. В штате Канзас всего $105$ округов, в
Миссури — $114$. Используя теорему Байеса, вычислите
вероятность, что человек, переехавший в агломерацию Канзас-Сити,
окажется в штате Канзас. Используйте P(Канзас),
P(Канзас-Сити) и P(Канзас-Сити|Канзас).

### Решение задачи

В районе Канзас-Сити $15$ округов, и $6$ из них
находятся в Канзасе, поэтому вероятность оказаться в Канзасе, учитывая,
что вы знаете, что кто-то живет в районе Канзас-Сити, должна составлять
$\frac{6}{15}$, что эквивалентно $\frac{2}{5}$. Однако цель этого
упражнения — не просто получить ответ, а показать, что теорема
Байеса предоставляет инструменты для его решения. При работе над
более сложными задачами будет очень
полезно укрепить доверие к теореме Байеса.

Итак, чтобы вычислить $P(\text{Канзаса} | \text{Канзас-Сити})$,
мы можем использовать теорему Байеса следующим образом:

$$
P(\text{Канзас} | \text{Канзас-Сити}) =
\frac{
    P(\text{Канзас-Сити} | \text{Канзас})\cdot P(\text{Канзас})
}{
    P(\text{Канзас-Сити})
}
$$

Учитывая имеющиеся данные, мы знаем, что из $105$ округов Канзаса $6$ находятся в районе Канзас-Сити:

$$
P(\text{Канзас-Сити} | \text{Канзас}) = \frac{6}{105}
$$

И между Миссури и Канзасом находится $219$ округов, $105$ из которых находятся в Канзасе:

$$
P(\text{Канзас}) = \frac{105}{219}
$$


И из этого общего количества $219$ округов $15$ находятся в районе КанзасСити:

$$
P(\text{Канзас-Сити}) = \frac{15}{219}
$$

Таким образом, заполнение всех частей теоремы Байеса дает результат:

$$
P(\text{Канзас} | \text{Канзас-Сити}) = 
\frac{
    \frac{6}{105} \cdot \frac{105}{219}
}{
    \frac{15}{219}
} = \frac{2}{5}
$$

### Ответ

Вероятность, что человек, переехавший в агломерацию
Канзас-Сити, окажется в штате Канзас:

$$
P(\text{Канзас} | \text{Канзас-Сити}) = 
\frac{
    \frac{6}{105} \cdot \frac{105}{219}
}{
    \frac{15}{219}
} = \frac{2}{5}
$$

### Проверка

```python
import numpy as np
import random

# Количество итераций
n_simulations =  100000

# Количество округов в Канзасе
kan_county_count =  105

# Количество округов в агломерации Канзас-Сити
kansas_city_count =  15

# Количество округов в Миссури
missouri_county_count =  114

# Переменная для подсчета количества случаев, когда человек окажется в Канзасе
kansas_count =  0

# Симуляция
for _ in range(n_simulations):
    # Случайное число от  1 до  219 (общее количество округов)
    random_number = random.randint(1,  219)
    
    # Проверка, находится ли округ в Канзасе
    if random_number <= kan_county_count:
        kansas_count +=  1

# Вычисление вероятности
probability_kansas = kansas_count / n_simulations

print(f"Вероятность оказаться в Канзасе: {probability_kansas}")
```

## Задача 2

### Условие задачи

В колоде 52 красные и черные карты, в том числе четыре туза: два красных и
два черных. Вы вынули из колоды черный туз и перемешали ее. Ваш друг вытянул
карту черной масти. Какова вероятность, что это туз?

### Решение задачи

Как и в предыдущем вопросе, мы можем легко увидеть, что есть
26 черных карт и 2 из них — тузы, и вероятность вытащить туза составляет
2/26, или 1/13, если мы вытянули черную карту. Но, опять же, мы
хотим укрепить некоторое доверие к теореме Байеса и не использовать
так много математических умственных сокращений. Используя теорему

Байеса, мы получаем:

$$
P(\text{туз} | \text{черная масть}) = \frac{
    P(\text{черная масть} | \text{туз}) \cdot P(\text{туз})
}{
    P(\text{черная масть})
}
$$

В колоде 26 черных карт из имеющейся 51 карты, так как мы убрали
1 красного туза. Если мы знаем, что вытянули туз, вероятность того, что
он черный, равна:

$$
P(\text{черная масть} | \text{туз}) = \frac{2}{3}
$$

В колоде теперь 51 карта, из которых только 3 туза, поэтому мы имеем:

$$
P(\text{туз}) = \frac{3}{51}
$$

Наконец, мы знаем, что из оставшейся 51 карты 26 черных, так что:

$$
P(\text{черная масть}) = \frac{26}{51}
$$

Теперь у нас есть достаточно информации, чтобы решить задачу:

$$
P(\text{туз} | \text{черная масть}) = \frac{
    \frac{2}{3} \cdot \frac{3}{51}
}{
    \frac{26}{51}
} = \frac{1}{13}
$$

### Ответ

Вероятность, что это туз:

$$
P(\text{туз} | \text{черная масть}) = \frac{
    \frac{2}{3} \cdot \frac{3}{51}
}{
    \frac{26}{51}
} = \frac{1}{13}
$$

### Проверка



## Задача 3

### Условие задачи

Вставить из ответов

### Решение задачи



### Ответ



### Проверка



## Задача 4

### Условие задачи



### Решение задачи



### Ответ



### Проверка



